<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Learn AWK with Emacs | jherrlin</title>

<meta property='og:title' content='Learn AWK with Emacs - jherrlin'>
<meta property='og:description' content='Intro   This post describes my workflow for learning the AWK programming language using Emacs, Org mode and Org-drill. The workflow may work for other programming languages. The post won&#39;t cover details on how to use Emacs, Org mode or Org-drill. It&#39;s intention is to provide a general overview of a workflow.
 A git repo is available with flash cards, note book and some text files here.'>
<meta property='og:url' content='https://jherrlin.github.io/posts/learn-awk/'>
<meta property='og:site_name' content='jherrlin'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/4bc4e51875ff5d86326b676d50864a2c?s=256'><meta property='article:section' content='Posts'><meta property='article:tag' content='emacs'><meta property='article:tag' content='awk'><meta property='article:tag' content='learning'><meta property='article:tag' content='org'><meta property='article:tag' content='org-drill'><meta property='article:tag' content='programming'><meta property='article:tag' content='language'><meta property='article:published_time' content='2020-07-20T00:00:00Z'/><meta property='article:modified_time' content='2020-07-20T00:00:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@jherrlin'><meta name='twitter:creator' content='@jherrlin'>


<link href="https://jherrlin.github.io/index.xml" rel="alternate" type="application/rss+xml" title="jherrlin" />

<link rel="stylesheet" href="/css/style.css"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="https://jherrlin.github.io/posts/learn-awk/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="https://jherrlin.github.io/">
          <h1 id="nav-heading" class="title is-4">jherrlin</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="github" href='https://github.com/jherrlin'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/jherrlin'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:jherrlin@gmail.com'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/john-herrlin-63458280'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="rss" href='/index.xml'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
  <script src="/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/emacs/">#emacs</a>



  
  | <a class="subtitle is-6" href="/tags/awk/">#awk</a>
  
  | <a class="subtitle is-6" href="/tags/learning/">#learning</a>
  
  | <a class="subtitle is-6" href="/tags/org/">#org</a>
  
  | <a class="subtitle is-6" href="/tags/org-drill/">#org-drill</a>
  
  | <a class="subtitle is-6" href="/tags/programming/">#programming</a>
  
  | <a class="subtitle is-6" href="/tags/language/">#language</a>
  


      
    </div>
    <h2 class="subtitle is-6">July 20, 2020</h2>
    <h1 class="title">Learn AWK with Emacs</h1>
    
    <div class="content">
      
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Intro
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>
  This post describes my workflow for learning the AWK programming language using Emacs,
  Org mode and Org-drill. The workflow may work for other programming languages. The post
  won&#39;t cover details on how to use Emacs, Org mode or Org-drill. It&#39;s intention is to
  provide a general overview of a workflow.</p>
<p>
  A git repo is available with flash cards, note book and some text files <a href="https://github.com/jherrlin/learn-awk">here</a>.</p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Content
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>
  I just read a few chapters in the &#34;The AWK programming language&#34; book and found AWK to be
  awesome and I want to learn more of the language. I begin to think about my approach for
  learning AWK. My goal is to be efficient with AWK in smaller scripts and one liners. AWK
  is Turing complete and can be used for larger applications. But if I write larger
  applications my weapon of choice is a functional lisp with immutable data structures. I
  see AWK as a natural tool in my tool box and the perfect language to filtering logs,
  search for patterns in files, reduce a couple of files, transform my accounting data or
  other things related to text with some kind of structure. And in combination with programs
  like <code class="verbatim">find</code>, <code class="verbatim">sed</code>, <code class="verbatim">grep</code> and <code class="verbatim">sort</code> AWK can be super powerful and efficient. This is
  where AWK shines for me.</p>
<p>
  One reason why I started to think about my learning process is that I feel that I don&#39;t
  have the time to learn a new language in one go and keep the knowledge fresh. I wanna
  progress slowly and over time. If I forget something or is kept away from AWK for a while
  I quickly wanna get back on track fast without needing to read a book again or consult to
  much documentation. This is of course not completely possible, but if I can keep the most
  essential parts of AWK in my second brain I am more than happy.</p>
<p>
  What I came up with is a workflow combined of <a href="https://orgmode.org/worg/org-contrib/org-drill.html">Org-drill</a> and <a href="https://orgmode.org/">Org mode</a> source blocks
  together with provided text files. Org-drill is an Emacs mode that uses a spaced
  repetition algorithm together with flash cards to provide you with questions and then the
  answer. The questions and answers are written by me and most often based around &#34;famous&#34;
  text files like Nginx access log, /etc/passwd or .ledger files.</p>
<p>
  A typical workflow to fill my source with questions and answers is to read a chapter in a
  book or a documentation page. If I find something that I think is useful I write one or
  more flash cards. This way I can increase my knowledge source and when I feel I have some
  time over I can run the learning workflow.</p>
<p>
  The learning workflow looks like this:</p>
<ol>
<li>
<p>Open 2 Emacs sessions</p>
</li>
<li>
<p>Open the file containing the flash cards in one session</p>
</li>
<li>
<p>Open a note book file in the other</p>
</li>
<li>
<p>Start org-drill in the flash cards session</p>
</li>
<li>
<p>Write your answers in the note book session</p>
</li>
</ol>
<p>Together with the note book file and the flash cards are a couple of text files. The text
  files are examples of the &#34;famous&#34; files. The note book file contains Org mode source
  blocks for each of the files. And the questions states what source block to use for that
  particular question.</p>
<p>
  A source block inside the note book file looks like this.</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org"><span class="c">#+BEGIN_SRC </span><span class="cs">awk</span><span class="c"> :results output code :in-file ./text-files/access.log
</span><span class="c"></span>  <span class="p">{</span> <span class="kr">print</span> <span class="p">}</span>
<span class="c">#+END_SRC</span></code></pre></div>
</div>
<p>
  It tells that the language to evaluated is AWK. Results should be inserted in the note
  book document just beneath the source block. The file that your AWK program have as input
  is in the <code class="verbatim">:in-file</code> argument. If <code class="verbatim">C-c C-c</code> is executed on this source block it will
  insert all of the content of <code class="verbatim">./text-files/access.log</code> file in the note book document. If
  an error occurs, the error message is inserted into the document.</p>
<p>
  Below is an example on how it can look like when you develop your answer. You write your
  AWK answer and use <code class="verbatim">C-c C-c</code> to see the result. If you are satisfied and think you have
  the correct answer, tell that to the org-drill session and it will then provide you with
  the correct answer. You correct yourself by telling org-drill how good you did on a scale
  from 1-5. Depending how you rate your answer, org-drill will set a date for the next time
  the question should appear.</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org"><span class="c">#+BEGIN_SRC </span><span class="cs">awk</span><span class="c"> :results output code :in-file ./text-files/access.log
</span><span class="c"></span>  <span class="p">{</span> <span class="nx">ips</span><span class="p">[</span><span class="o">$</span><span class="mi">1</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span> <span class="p">}</span>
  <span class="nb">END</span> <span class="p">{</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">in</span> <span class="nx">ips</span><span class="p">)</span> <span class="p">{</span> <span class="kr">print</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">ips</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">|</span> <span class="s2">&#34;sort -rk 2,2&#34;</span><span class="p">}}</span>
<span class="c">#+END_SRC</span>

<span class="cs">#+RESULTS</span><span class="c">:</span>
<span class="c">#+begin_src </span><span class="cs">awk</span><span class="c">
</span><span class="c"></span><span class="mf">121.204</span><span class="p">.</span><span class="mf">106.181</span> <span class="mi">8</span>
<span class="mf">191.54</span><span class="p">.</span><span class="mf">160.135</span> <span class="mi">7</span>
<span class="mf">111.185</span><span class="p">.</span><span class="mf">35.101</span> <span class="mi">1</span>
<span class="mf">111.85</span><span class="p">.</span><span class="mf">5.44</span> <span class="mi">1</span>
<span class="mf">101.11</span><span class="p">.</span><span class="mf">117.117</span> <span class="mi">1</span>
<span class="c">#+end_src</span></code></pre></div>
</div>
<p>
  Below is an example on how the flash card looks. If you know basic with Org mode this
  structure will feel very familiar. One great benefit of this is that it&#39;s just text. No
  database or weird stuff. Just plain text that is easy to search in and easy to version
  control.</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org"><span class="gu">**</span> Print line 7 to 10 of file                                    <span class="ge"> :awk:drill:</span>

   How do you print line 7 to 10 with a range pattern?

   :in-file ./text-files/ledger.ledger

<span class="gu">***</span> Answer

<span class="c">    #+BEGIN_SRC </span><span class="cs">awk</span><span class="c"> :results output code :in-file ./text-files/ledger.ledger
</span><span class="c"></span>      <span class="nb">FNR</span><span class="o">==</span><span class="mi">7</span><span class="p">,</span><span class="nb">FNR</span><span class="o">==</span><span class="mi">10</span>
<span class="c">    #+END_SRC</span>

    #+RESULTS:
<span class="c">    #+begin_src </span><span class="cs">awk</span><span class="c">
</span><span class="c"></span>    <span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">17</span> <span class="o">*</span> <span class="nx">Dustin</span><span class="p">.</span> <span class="nx">KÃ¶p</span> <span class="nx">av</span> <span class="nx">tangentbord</span><span class="p">.</span>
       <span class="p">;;</span> <span class="o">~</span><span class="err">/company/incomming-invoices/2020/2020-04-17-lenovo-keyboard-swedbank-transaction.pdf</span>
       <span class="mi">2</span><span class="err">:</span><span class="mi">4</span><span class="err">:</span><span class="mi">4</span><span class="err">:</span><span class="mi">0</span>                                   <span class="mf">667.00</span> <span class="nx">SEK</span>
       <span class="mi">2</span><span class="err">:</span><span class="mi">0</span><span class="err">:</span><span class="mi">1</span><span class="err">:</span><span class="mi">8</span>                                  <span class="o">-</span><span class="mf">667.00</span> <span class="nx">SEK</span>
<span class="c">    #+end_src</span></code></pre></div>
</div>
<p>
  This kind of setup for learning languages feels very appealing to me. I think that AWK
  fits extra good as it&#39;s possible to have predefined text files as input and AWK programs
  can be short and efficient. When writing this post I have just finished the workflow and
  got all of the pieces together. Now it&#39;s time to fill my second brain with good
  questions and answers and continue my path to be a happy AWK user. If you wanna help me
  optimize any of the workflows or contribute with good flash cards, I am more than happy
  to receive pull requests via GitHub or feedback via Twitter.</p>
<p>
  Here are a couple of resources related to the post:</p>
<ul>
<li>
<p><a href="https://ia802309.us.archive.org/25/items/pdfy-MgN0H1joIoDVoIC7/The_AWK_Programming_Language.pdf">The AWK programming language book</a></p>
</li>
<li>
<p><a href="https://www.gnu.org/software/gawk/">Gnus AWK implementation called GAWK</a></p>
</li>
<li>
<p><a href="https://github.com/jherrlin/learn-awk">GitHub project that implements the ideas</a></p>
</li>
<li>
<p><a href="https://www.gnu.org/software/emacs/">Emacs</a></p>
</li>
<li>
<p><a href="https://orgmode.org/">Org mode</a></p>
</li>
<li>
<p><a href="https://orgmode.org/worg/org-contrib/org-drill.html">Org-drill</a></p>
</li>
</ul>
<p>
  Here is a gif showing the learning workflow.</p>
<p>
  <img src="/learn-awk.gif" alt="/learn-awk.gif" title="/learn-awk.gif" /></p>
<p>
  A mp4 video with better quality can be found here <code class="verbatim">http://jherrlin.github.io/learn-awk.mp4</code> (11M).</p>
</div>
</div>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="/posts/emacs-orgmode-tables/">Emacs Org mode tables</a></li>
	
	<li><a href="/posts/emacs-orgmode-source-code-blocks/">Emacs Org mode source blocks</a></li>
	
	<li><a href="/posts/emacs-mu4e/">Mail in Emacs with mu4e and mbsync</a></li>
	
	<li><a href="/posts/emacs-gnupg-and-pass/">Emacs, GnuPG and Pass</a></li>
	
	<li><a href="/posts/clojure-spec-test-transducers/">Quick overview of Clojure spec, test.check and transducers</a></li>
	
</ul>
</div>
      
    </div>
    
  </div>
</section>

    <script src="/js/copycode.js"></script>



<section class="section">
  <div class="container has-text-centered">
    <p></p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>



</body>
</html>

