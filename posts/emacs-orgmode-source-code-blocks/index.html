<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Emacs Org mode source blocks | jherrlin</title>

<meta property='og:title' content='Emacs Org mode source blocks - jherrlin'>
<meta property='og:description' content='Post updates     [2020-06-23] New section. &#34;Combine source blocks&#34;   Intro   It&#39;s time to start documenting how I use Emacs Org mode (from now on org) and it will contain a serie of posts. This is the first post and it will cover source blocks. Some of the content assumes basic knowledge about org. If you are new to org I can recommend this two videos; hrs and kitchin.'>
<meta property='og:url' content='https://jherrlin.github.io/posts/emacs-orgmode-source-code-blocks/'>
<meta property='og:site_name' content='jherrlin'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/4bc4e51875ff5d86326b676d50864a2c?s=256'><meta property='article:section' content='Posts'><meta property='article:tag' content='emacs'><meta property='article:tag' content='GNU'><meta property='article:tag' content='org'><meta property='article:tag' content='programming'><meta property='article:published_time' content='2020-06-15T13:18:00&#43;02:00'/><meta property='article:modified_time' content='2020-06-15T13:18:00&#43;02:00'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@jherrlin'><meta name='twitter:creator' content='@jherrlin'>


<link href="https://jherrlin.github.io/index.xml" rel="alternate" type="application/rss+xml" title="jherrlin" />

<link rel="stylesheet" href="/css/style.css"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="https://jherrlin.github.io/posts/emacs-orgmode-source-code-blocks/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="https://jherrlin.github.io/">
          <h1 id="nav-heading" class="title is-4">jherrlin</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="github" href='https://github.com/jherrlin'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/jherrlin'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:jherrlin@gmail.com'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/john-herrlin-63458280'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="rss" href='/index.xml'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
  <script src="/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/emacs/">#emacs</a>



  
  | <a class="subtitle is-6" href="/tags/gnu/">#GNU</a>
  
  | <a class="subtitle is-6" href="/tags/org/">#org</a>
  
  | <a class="subtitle is-6" href="/tags/programming/">#programming</a>
  


      
    </div>
    <h2 class="subtitle is-6">June 15, 2020</h2>
    <h1 class="title">Emacs Org mode source blocks</h1>
    
    <div class="content">
      
<h2 id="headline-1">
Post updates
</h2>
<ul>
<li>
<p>
[2020-06-23] New section. &#34;Combine source blocks&#34;
</p>
</li>
</ul>
<h2 id="headline-2">
Intro
</h2>
<p>
  It&#39;s time to start documenting how I use Emacs <a href="https://orgmode.org/">Org mode</a> (from now on org) and it will
  contain a serie of posts. This is the first post and it will cover source blocks. Some
  of the content assumes basic knowledge about org. If you are new to org I can recommend
  this two videos; <a href="https://www.youtube.com/watch?v=SzA2YODtgK4">hrs</a> and <a href="https://www.youtube.com/watch?v=fgizHHd7nOo">kitchin</a>.
</p>
<p>
  One of the features I&#39;ve been using very frequently is source blocks. The power of
  evaluating code directly from a block and get the results back into the document is
  really convenient. While reading <a href="https://ia802309.us.archive.org/25/items/pdfy-MgN0H1joIoDVoIC7/The_AWK_Programming_Language.pdf">The AWK Programming Language</a> I took notes and did all
  of the <code class="verbatim">awk</code> programming withing source blocks. This makes me able to have notes, code
  and execution results in the same document. And as everything is just text, it&#39;s easy
  to version control!
</p>
<p>
  This is the structure of a source block. Org mode&#39;s documentation on source blocks can
  be found <a href="https://orgmode.org/manual/Working-with-Source-Code.html#Working-with-Source-Code">here</a>.
</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org"><span class="c">  #+BEGIN_SRC </span><span class="cs">&lt;language&gt;</span><span class="c"> &lt;switches&gt; &lt;header arguments&gt;
</span><span class="c"></span>    &lt;body&gt;
<span class="c">  #+END_SRC</span></code></pre></div>
</div>
<p>
  Header arguments differ for different languages and applications. Look in the
  documentation for your specific language/application to find out what and how to use it.
</p>
<h2 id="headline-3">
Versions
</h2>
<p>
  â€¦ of Emacs and Org mode.
</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org"><span class="c">  #+BEGIN_SRC </span><span class="cs">emacs-lisp</span><span class="c">
</span><span class="c"></span>    <span class="p">(</span><span class="nv">org-version</span><span class="p">)</span>
<span class="c">  #+END_SRC</span>

  #+RESULTS:
  : 9.3.7

<span class="c">  #+BEGIN_SRC </span><span class="cs">emacs-lisp</span><span class="c">
</span><span class="c"></span>  <span class="p">(</span><span class="nv">emacs-version</span><span class="p">)</span>
<span class="c">  #+END_SRC</span>

  #<span class="gd">+RESULTS:
</span><span class="gd">  : GNU Emacs 26.3 (build 1, x86_64-pc-linux-gnu, GTK+</span> Version 3.24.20)
  :  of 2020-05-19</code></pre></div>
</div>
<h2 id="headline-4">
Emacs config
</h2>
<p>
  Without config Emacs don&#39;t know how to execute source blocks. This following snippet
  provides Emacs with the ability to understand a set of languages/applications. The set
  of languages/applications need to be available in the underlying OS. To get a complete
  list of languages/applications available in org. A complete list can be found here:
  <a href="https://code.orgmode.org/bzg/org-mode/src/master/lisp">repo</a>. Support for source blocks are available in files prefixed with <code class="verbatim">ob-</code>.
</p>
<div class="src src-emacs-lisp">
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">org-confirm-babel-evaluate</span> <span class="no">nil</span><span class="p">)</span>

  <span class="p">(</span><span class="nv">org-babel-do-load-languages</span>
   <span class="ss">&#39;org-babel-load-languages</span>
   <span class="o">&#39;</span><span class="p">((</span><span class="nv">emacs-lisp</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">shell</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>  <span class="c1">; in my case /bin/bash</span>
     <span class="p">(</span><span class="nv">scheme</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">python</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">ledger</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">sed</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">awk</span> <span class="o">.</span> <span class="no">t</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">clojure</span> <span class="o">.</span> <span class="no">t</span><span class="p">)))</span></code></pre></div>
</div>
<h2 id="headline-5">
Bash echo
</h2>
<p>
  This small example uses bash to evaluate the <code class="verbatim">echo</code> command. Evaluation is done by
  moving the pointer to the source block and press the key sequence <code class="verbatim">C-c C-c</code>.
</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org">  What shell am I using?

<span class="c">  #+BEGIN_SRC </span><span class="cs">shell</span><span class="c">
</span><span class="c"></span>    <span class="nb">echo</span> <span class="nv">$SHELL</span>
<span class="c">  #+END_SRC</span>

  #+RESULTS:
  : /bin/bash</code></pre></div>
</div>
<h2 id="headline-6">
Echo input variables
</h2>
<p>
  Arguments can be passed to source blocks from the document. This example passes 2 <code class="verbatim">:var</code>,
  <strong>ARG1</strong> and <strong>ARG2</strong>. The command get the arguments and uses them in the command.
</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org"><span class="c">  #+BEGIN_SRC </span><span class="cs">shell</span><span class="c"> :var ARG1=&#34;FOO&#34; ARG2=&#34;BAR&#34;
</span><span class="c"></span>    <span class="nb">echo</span> <span class="nv">$ARG1</span> <span class="nv">$ARG2</span>
<span class="c">  #+END_SRC</span>

  #+RESULTS:
  : FOO BAR</code></pre></div>
</div>
<h2 id="headline-7">
Document variables
</h2>
<p>
  Lets elaborate on argument to source blocks even further. Org documents can contain
  variables that holds data. This example contains a org table with the variable name
  <code class="verbatim">my-list</code>. <code class="verbatim">my-list</code> is passed as an argument to the Python source block via the variable
  <code class="verbatim">lst</code>. When executed by Python the <code class="verbatim">lst</code> data structure is a vector with vectors.
</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org">  #+NAME: my-list
  <span class="s">| A | 1 |</span>
  <span class="s">| B | 2 |</span>
  <span class="s">| C | 3 |</span>

  my-list is a variable in this org document and can be passed in as data to a source code
  block.

<span class="c">  #+BEGIN_SRC </span><span class="cs">python</span><span class="c"> :results output :var lst=my-list
</span><span class="c"></span>    <span class="k">print</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
<span class="c">  #+END_SRC</span>

  The data structure that will be passed to the source block is a vector or vectors.

  #+RESULTS:
  : [[&#39;A&#39;, 1], [&#39;B&#39;, 2], [&#39;C&#39;, 3]]

  Just like with a normal Python application you can manipulate the data.

<span class="c">  #+BEGIN_SRC </span><span class="cs">python</span><span class="c"> :results raw :var lst=my-list
</span><span class="c"></span>    <span class="k">return</span> <span class="p">[[</span><span class="nb">chr</span><span class="p">((</span><span class="nb">ord</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span> <span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">]</span>
<span class="c">  #+END_SRC</span>

  #+RESULTS:
  [[&#39;B&#39;, 2], [&#39;C&#39;, 3], [&#39;D&#39;, 4]]</code></pre></div>
</div>
<h2 id="headline-8">
Result output
</h2>
<p>
  Results output can be in many different shapes. Raw output, tables, as code and many
  more. Output results are described with the <code class="verbatim">:results</code> switch in the source block header.
  This post won&#39;t go more into details but more information can be found <a href="https://orgmode.org/manual/Results-of-Evaluation.html">here</a>.
</p>
<h2 id="headline-9">
More on document variables
</h2>
<p>
  This example provides another org document variable. In this case the <code class="verbatim">text-example</code>
  text block. The text in that block is passed as an argument to the <code class="verbatim">awk</code> source block.
  <code class="verbatim">awk</code> is a programming language with good features to manipulate text. It can take text
  from <strong>stdin</strong>. That&#39;s exactly what is happening here. Often you see <code class="verbatim">awk</code> used in shell
  commands, similar to this: <code class="verbatim">cat /etc/passwd | awk -F&#34;:&#34; &#39;{ print $1 }&#39;</code>. Here <code class="verbatim">awk</code> gets
  <strong>stdin</strong> data from the pipe. But in our source block it gets <strong>stdin</strong> data from the org
  document.
</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org">  #+NAME: text-example
<span class="c">  #+BEGIN_EXAMPLE</span>
    Item1 100
    Item2 200
    Item3 50
<span class="c">  #+END_EXAMPLE</span>

  Sum field nr 2.

<span class="c">  #+BEGIN_SRC </span><span class="cs">awk</span><span class="c"> :results table :stdin text-example
</span><span class="c"></span>    <span class="nb">BEGIN</span> <span class="p">{</span><span class="nb">OFS</span><span class="o">=</span><span class="s2">&#34;|&#34;</span><span class="p">};</span> <span class="p">{</span> <span class="nx">sum</span><span class="o">+=</span> <span class="o">$</span><span class="mi">2</span><span class="p">};</span> <span class="nb">END</span> <span class="p">{</span> <span class="kr">print</span> <span class="s2">&#34;Sum&#34;</span><span class="p">,</span> <span class="nx">sum</span><span class="p">}</span>
<span class="c">  #+END_SRC</span>

  #+RESULTS:
  <span class="s">| Sum | 350 |</span></code></pre></div>
</div>
<h2 id="headline-10">
File from file system
</h2>
<p>
  This example is very similar to the one in <a href="#headline-4">&#34;Echo input variables&#34;</a>. It passed a variable
  to the source block that tells a file path to <code class="verbatim">awk</code>. <code class="verbatim">awk</code> is then called with that
  <strong>:in-file</strong> as an argument.
</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org">   Get system users that have <span class="nc">=/bin/bash=</span> access.

<span class="c">  #+BEGIN_SRC </span><span class="cs">awk</span><span class="c"> :results table :in-file /etc/passwd
</span><span class="c"></span>    <span class="nb">BEGIN</span> <span class="p">{</span> <span class="nb">FS</span><span class="o">=</span><span class="s2">&#34;:&#34;</span><span class="p">}</span>
    <span class="o">$</span><span class="mi">7</span> <span class="o">==</span> <span class="s2">&#34;/bin/bash&#34;</span> <span class="p">{</span> <span class="kr">print</span> <span class="o">$</span><span class="mi">1</span><span class="p">}</span>
<span class="c">  #+END_SRC</span>

  #+RESULTS:
  <span class="s">| root |</span>
  <span class="s">| john |</span></code></pre></div>
</div>
<h2 id="headline-11">
Combine source blocks
</h2>
<p>
  It&#39;s possible to combine text from different source blocks with the <code class="verbatim">:noweb yes</code> header
  argument. This example shows a ledger that&#39;s split up into income and expenses source
  blocks. They are then combined in the <code class="verbatim">balance</code> source block. Ledger is a plaintext
  accounting tool and can create a balance report from our assets, income and expenses.
  The <code class="verbatim">:noweb</code> header arguments in not something that is specific for ledger.
</p>
<p>
  Docs on <code class="verbatim">:noweb</code> header argument can be found <a href="https://orgmode.org/manual/Noweb-Reference-Syntax.html">here</a>. Docs on ledger can be found <a href="https://www.ledger-cli.org/3.0/doc/ledger3.html#Org-mode-with-Babel">here</a>.
</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org">  #+NAME: income
<span class="c">  #+BEGIN_SRC </span><span class="cs">ledger</span><span class="c">
</span><span class="c"></span>    2020-06-24 * Sold old computer
        Assets:Bank:Card                         5000.00
        Income:Secondhand                       -5000.00
    2020-06-25 * Salary
        Assets:Bank:Card                        25000.00
        Income:Work:Salary                     -25000.00
<span class="c">  #+END_SRC</span>

  #+NAME: expenses
<span class="c">  #+BEGIN_SRC </span><span class="cs">ledger</span><span class="c">
</span><span class="c"></span>    2020-06-23 * Rent
        Expenses:Rent                            3000.00
        Assets:Bank:Card                        -3000.00
    2020-06-24 * Gas
        Expenses:Cas:Gas                         3000.00
        Assets:Bank:Card                        -3000.00
<span class="c">  #+END_SRC</span>

  #+NAME: balance
<span class="c">  #+BEGIN_SRC </span><span class="cs">ledger</span><span class="c"> :noweb yes
</span><span class="c"></span>    &lt;&lt;income&gt;&gt;
    &lt;&lt;expenses&gt;&gt;
<span class="c">  #+END_SRC</span>

  #+RESULTS: balance
  :                24000  Assets:Bank:Card
  :                 6000  Expenses
  :                 3000    Cas:Gas
  :                 3000    Rent
  :               -30000  Income
  :                -5000    Secondhand
  :               -25000    Work:Salary
  : --------------------
  :                    0</code></pre></div>
</div>
<h2 id="headline-12">
Combine results and source blocks
</h2>
<p>
  Now lets use the result from one source block as argument to another. The example
  requires some files with a <code class="verbatim">.awk</code> ending to be present in <code class="verbatim">/tmp</code>. We use <code class="verbatim">bash</code> to get
  data about our file system. That result is then feed to <code class="verbatim">awk</code> that creates a good
  looking table. That table is then sent to Python for further processing.
</p>
<p>
  There is nothing different here from the other examples except that in this case we use
  <code class="verbatim">#+NAME:</code> on source blocks instead of a text blocks or a tables. The results from the
  named source blocks will then be available as input to other source blocks.
</p>
<div class="src src-org">
<div class="highlight"><pre class="chroma"><code class="language-org" data-lang="org">  List files ending with .awk in <span class="ge">/tmp/</span> dir.

  #+NAME: ls-output
<span class="c">  #+BEGIN_SRC </span><span class="cs">shell</span><span class="c"> :dir /tmp :results output
</span><span class="c"></span>    ls -la *.awk
<span class="c">  #+END_SRC</span>

  #+RESULTS: ls-output
  : -rw-r--r-- 1 john users 492 Jun 15 11:46 awk-play.awk
  : -rw-r--r-- 1 john users 396 Jun 15 13:10 copy-line-on-confirm.awk
  : -rw-r--r-- 1 john users 412 Jun 15 12:25 filter-google-chromepasswords.awk

  Take only size and filename and return a table.

  #+NAME: ls-output-table
<span class="c">  #+BEGIN_SRC </span><span class="cs">awk</span><span class="c"> :results table :stdin ls-output
</span><span class="c"></span>    <span class="nb">BEGIN</span> <span class="p">{</span> <span class="nb">OFS</span><span class="o">=</span><span class="s2">&#34;|&#34;</span> <span class="p">};</span> <span class="p">{</span> <span class="kr">print</span> <span class="o">$</span><span class="mi">5</span><span class="p">,</span> <span class="o">$</span><span class="mi">9</span><span class="p">}</span>
<span class="c">  #+END_SRC</span>

  #+RESULTS: ls-output-table
  <span class="s">| 492 | awk-play.awk                      |</span>
  <span class="s">| 396 | copy-line-on-confirm.awk          |</span>
  <span class="s">| 412 | filter-google-chromepasswords.awk |</span>

  Process the table with Python.

<span class="c">  #+BEGIN_SRC </span><span class="cs">python</span><span class="c"> :results output :var table=ls-output-table
</span><span class="c"></span>    <span class="k">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>                              <span class="c1"># Biggest awk file</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>                              <span class="c1"># Smallest awk file</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="n">table</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span> <span class="p">,</span> <span class="s2">&#34;kb&#34;</span><span class="p">)</span> <span class="c1"># Sum of all awk files</span>
<span class="c">  #+END_SRC</span>

  #+RESULTS:
  : [[492, &#39;awk-play.awk&#39;], [396, &#39;copy-line-on-confirm.awk&#39;], [412, &#39;filter-google-chromepasswords.awk&#39;]]
  : [492, &#39;awk-play.awk&#39;]
  : [396, &#39;copy-line-on-confirm.awk&#39;]
  : 1.3 kb</code></pre></div>
</div>
<h2 id="headline-13">
Nice things I didn&#39;t cover
</h2>
<p>
  Org have ways to execute code on remote servers via source blocks. This is awesome and can
  be used for DevOps. I have used it in cases where an Ansible playbook is overkill. There
  is a really nice blog post and video about this stuff <a href="http://howardism.org/Technical/Emacs/literate-devops.html">here</a>.
</p>
<p>
  Source blocks can also be written to the file system via the header switch <code class="verbatim">:tangle</code>. This
  is also very useful. More info about that can be found <a href="https://orgmode.org/manual/Extracting-Source-Code.html">here</a>.
</p>
<h2 id="headline-14">
Conclusion
</h2>
<p>
  I think org is truly an amazing piece of software. With very little effort from the user
  it can provide a very rich and interactive experience with a lot of applications and
  languages. From the document view everything is just text so version control a org
  document is very simple.
</p>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="/posts/clojure-spec-test-transducers/">Quick overview of Clojure spec, test.check and transducers</a></li>
	
	<li><a href="/posts/datomic-entity-event-log/">Entity event log in Datomic</a></li>
	
</ul>
</div>
      
    </div>
    
  </div>
</section>

    <script src="/js/copycode.js"></script>



<section class="section">
  <div class="container has-text-centered">
    <p></p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>



</body>
</html>

